This documentation is a work-in-progress. However it reflects the latest state of Lens development.

# Install Lens locally

## Prerequisites

- Node.js >=0.8.x
- [Pandoc](http://johnmacfarlane.net/pandoc/installing.html) >= 1.11.x (for on-the-fly generation of the Lens manual from Markdown)

Node.js is just used a development enviroment. You'll soon be able to create self-contained packages of the individual modules or the main app itself.

### Fresh install

#### Install the Substance Screwdriver command line utility. 

It's just a little helper that hels you deal with our modules.

    $ git clone https://github.com/substance/screwdriver.git
    $ cd screwdriver
    $ sudo python setup.py install


### Clone the Lens Mothership

    $ git clone https://github.com/elifesciences/lens.git
  
### Run the update command, which pulls in all the sub-modules and dependencies

    $ cd lens
    $ substance --update
  
### Finally start the server and point your browser to `http://localhost:4000`

    $ substance

You can have a look at the example document, by pointing your browser to `http://localhost:4000/#lorem_ipsum` or view the autogenerated Lens.Article documentation here `http://localhost:4000/#lens_article`.
   
## Keep your local version in sync

You may want to pull in updates every now and then, which is simple. In the Lens project root dir do:

    $ substance --update
   
And start the dev environment again.

    $ substance

## Contributing

I'm assuming here that you have push access to the repositories, because as a start I'd like to get the Lens core dev team up and running. I'll provide documentation on how to work with a forked version of a module and submit a pull request soon.


Say you've made changes to the Lens.Article module. In order to commit them you simply have to navigate to `node_modules/lens-article` and do:

    $ git add <YOUR STUFF>
    $ git commit -m "Fixed X"
    $ git push
   
Alternatively, if you are working on breaking changes you can switch to a different branch, and submit a pull request using the Github interace. Here's how:

    $ git checkout -b my_feature_branch
    $ git add <YOUR STUFF>
    $ git commit -m "Fixed X"
    $ git push

Then go to [Github](http://github.com) and submit a pull request.

Another hint: To pull in upstream changes from master for the entire project do this:

    $ substance --git -- pull origin master:<feature_branch_name>

